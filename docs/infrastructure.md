Infrastructure
===========================

Host node provisioning
--------------------------------------

Using Radiant project account `bbdr`, I followed the [Radiant instance creation guide](https://wiki.ncsa.illinois.edu/display/ICI/Creating+new+instances#Creatingnewinstances-SecurityGroups) to create a m1.large (4vCPU/8GB) VM.

Installed [k3s](https://k3s.io/) and updated system packages (apt upgrade).

Saved a VM snapshot as `k3s-ubuntu-20.04-20210304`.


Gave the cluster to Rancher control using the [NCSA Rancher instance](https://gonzo-rancher.ncsa.illinois.edu), and copied the kubeconfig generated by Rancher to local file `$HOME/.kube/lsst-sandbox.kubeconfig`.

```
manninga@darkmatter$ kubectl get node
NAME           STATUS   ROLES                  AGE   VERSION
lsst-sandbox   Ready    control-plane,master   21m   v1.20.4+k3s1

manninga@darkmatter$ kubectl get pod --all-namespaces 
NAMESPACE       NAME                                      READY   STATUS      RESTARTS   AGE
kube-system     local-path-provisioner-5ff76fc89d-j4497   1/1     Running     0          22m
kube-system     metrics-server-86cbb8457f-bgxth           1/1     Running     0          22m
kube-system     coredns-854c77959c-rrlfx                  1/1     Running     0          22m
kube-system     helm-install-traefik-86dr6                0/1     Completed   0          22m
kube-system     svclb-traefik-69mcb                       2/2     Running     0          22m
kube-system     traefik-6f9cbd9bd4-lw9qm                  1/1     Running     0          22m
cattle-system   cattle-cluster-agent-77b6fb8f9b-dh628     1/1     Running     0          2m49s
fleet-system    fleet-agent-76fc77855-b9csw               1/1     Running     0          69s
```
